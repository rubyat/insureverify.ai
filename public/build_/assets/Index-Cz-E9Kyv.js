import{d as k,r as u,c as l,o as i,a as f,u as x,h as V,w as _,b as e,f as w,t as a,g as c,i as m,F as y,j as b,e as C,k as D,l as I,n as B,m as L}from"./app-B_Zw6QGP.js";import{_ as M}from"./AppLayout.vue_vue_type_script_setup_true_lang-oEio1Vio.js";import"./index-7eilHQPG.js";import"./useForwardExpose-C6-hPyV1.js";import"./VisuallyHidden-Cy1sULpD.js";import"./createLucideIcon-CHfYH6pV.js";const N={class:"p-6 space-y-6 bg-gray-50"},S={class:"flex items-center justify-between"},j={class:"text-sm text-gray-600"},F={class:"flex flex-wrap items-center justify-end gap-2"},T={class:"overflow-x-auto rounded-md border bg-white"},E={class:"min-w-full divide-y"},z={class:"divide-y"},A={class:"px-4 py-3"},H={class:"px-4 py-3"},P={class:"px-4 py-3"},R={class:"px-4 py-3"},$={class:"px-4 py-3"},q={class:"text-gray-500"},G={key:0,class:"flex items-center gap-2"},Y=k({__name:"Index",props:{usages:{},metrics:{},filters:{}},setup(v){const o=v,h=[{title:"Dashboard",href:"/dashboard"},{title:"Usage",href:"/admin/usage"}],n=u(o.filters?.subscription_id||""),d=u(o.filters?.user_id||""),p=u(o.filters?.metric||"verifications"),g=()=>{L.get(route("admin.usage.index"),{subscription_id:n.value||void 0,user_id:d.value||void 0,metric:p.value||void 0},{preserveState:!0,replace:!0})},U=r=>{if(!r)return"";const t=r.replace(/<[^>]*>/g,""),s=document.createElement("textarea");return s.innerHTML=t,s.value};return(r,t)=>(i(),l(y,null,[f(x(V),{title:"Usage"}),f(M,{breadcrumbs:h},{default:_(()=>[e("div",N,[e("div",S,[t[3]||(t[3]=e("h1",{class:"text-xl font-semibold"},"Usage",-1)),e("div",j,"Rows: "+a(r.metrics.rows),1)]),e("div",F,[c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),type:"number",min:"1",placeholder:"Subscription ID",class:"rounded border px-3 py-2 w-40"},null,512),[[m,n.value]]),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>d.value=s),type:"number",min:"1",placeholder:"User ID",class:"rounded border px-3 py-2 w-32"},null,512),[[m,d.value]]),c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s),type:"text",placeholder:"Metric (e.g., verifications)",class:"rounded border px-3 py-2 w-64"},null,512),[[m,p.value]]),e("button",{onClick:g,class:"rounded bg-primary px-4 py-2 text-white"},"Apply")]),e("div",T,[e("table",E,[t[4]||(t[4]=e("thead",null,[e("tr",{class:"text-left"},[e("th",{class:"px-4 py-2"},"Metric"),e("th",{class:"px-4 py-2"},"Used"),e("th",{class:"px-4 py-2"},"Period"),e("th",{class:"px-4 py-2"},"Subscription"),e("th",{class:"px-4 py-2"},"User")])],-1)),e("tbody",z,[(i(!0),l(y,null,b(r.usages.data,s=>(i(),l("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",A,a(s.metric),1),e("td",H,a(s.used),1),e("td",P,a(s.period.start)+" â†’ "+a(s.period.end),1),e("td",R,"#"+a(s.subscription?.id)+" ("+a(s.subscription?.status)+")",1),e("td",$,[C(a(s.user?.name)+" ",1),e("span",q,a(s.user?.email),1)])]))),128))])])]),r.usages.links?(i(),l("div",G,[(i(!0),l(y,null,b(r.usages.links,s=>(i(),D(x(I),{key:s.url+s.label,href:s.url||"#",class:B(["px-3 py-1 rounded",{"bg-gray-200":s.active,"opacity-50 pointer-events-none":!s.url}])},{default:_(()=>[e("span",null,a(U(s.label)),1)]),_:2},1032,["href","class"]))),128))])):w("",!0)])]),_:1})],64))}});export{Y as default};
