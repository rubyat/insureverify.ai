import{d as F,C as S,p as Y,r as $,s as v,c as n,o as l,a as k,k as j,u as r,h as N,w as h,b as e,f as a,F as c,j as y,t as o,n as A,B as U,g as m,i as p,D as z}from"./app-B_Zw6QGP.js";import{_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-oEio1Vio.js";import{_ as E}from"./SiteLayout.vue_vue_type_script_setup_true_lang-C4QPYVyk.js";import{_ as I}from"./Layout.vue_vue_type_script_setup_true_lang-BEjMiQs6.js";import"./index-7eilHQPG.js";import"./useForwardExpose-C6-hPyV1.js";import"./VisuallyHidden-Cy1sULpD.js";import"./createLucideIcon-CHfYH6pV.js";import"./Heading.vue_vue_type_script_setup_true_lang-FmtfF59k.js";const R={class:"p-6 space-y-6 max-w-3xl"},T={key:0,class:"space-y-2"},q={class:"rounded border p-4"},G={class:"mt-3 grid grid-cols-1 gap-2 sm:grid-cols-3"},H={class:"font-medium"},J={class:"font-medium"},K={class:"font-medium"},O={class:"rounded border p-4"},Q={class:"mt-2 text-sm"},W={class:"mt-4 grid gap-4"},X={class:"grid gap-3"},Z={class:"font-medium text-sm"},ee={class:"text-xs text-muted-foreground"},te={class:"flex items-center gap-2"},se={key:0,class:"px-2 py-1 text-xs rounded-full bg-emerald-100 text-emerald-700"},re=["disabled","onClick"],de=["disabled","onClick"],oe={class:"rounded border"},le={class:"divide-y"},ne={class:"text-muted-foreground"},ie=["href"],ae={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},ue={class:"relative z-10 w-full max-w-lg rounded-lg bg-white shadow border border-gray-200"},me={class:"grid grid-cols-2 gap-3"},pe={key:0,class:"text-xs text-red-600 mt-1"},xe={key:0,class:"text-xs text-red-600 mt-1"},ce={key:0,class:"text-xs text-red-600 mt-1"},be={class:"grid grid-cols-2 gap-3"},fe={key:0,class:"text-xs text-red-600 mt-1"},ve={key:0,class:"text-xs text-red-600 mt-1"},ye={class:"flex items-center justify-end gap-2 pt-2"},ge=["disabled"],_e={key:0,class:"text-xs text-emerald-700"},ke={key:1,class:"text-xs text-red-700"},Se=F({__name:"Billing",props:{currentPlan:{},invoices:{},paymentMethod:{},cards:{},errors:{}},setup(C){const w=C,u=S(),M=Y(()=>u.props?.auth?.is_admin?L:E),D=[{title:"Billing",href:"/app/billing"}],b=$(!1),d=v({first_name:"",last_name:"",card:"",exp:"",cvv:""}),g=v({}),_=v({});function P(i){g.post(route("app.billing.cards.default",{card:i}),{preserveScroll:!0})}function V(i){_.delete(route("app.billing.cards.destroy",{card:i}),{preserveScroll:!0})}function B(){d.reset(),b.value=!0}function x(){b.value=!1}return(i,t)=>(l(),n(c,null,[k(r(N),{title:"Billing"}),(l(),j(z(M.value),{breadcrumbs:D},{default:h(()=>[k(I,null,{default:h(()=>[e("div",R,[t[19]||(t[19]=e("h1",{class:"text-2xl font-semibold"},"Billing",-1)),i.errors?.length?(l(),n("div",T,[(l(!0),n(c,null,y(i.errors,(s,f)=>(l(),n("div",{key:f,class:"rounded border border-red-300 bg-red-50 p-3 text-sm text-red-900"},o(s),1))),128))])):a("",!0),e("div",q,[t[9]||(t[9]=e("h2",{class:"text-lg font-semibold"},"Current Plan",-1)),e("div",G,[e("div",null,[t[6]||(t[6]=e("div",{class:"text-sm text-muted-foreground"},"Plan",-1)),e("div",H,o(i.currentPlan.name),1)]),e("div",null,[t[7]||(t[7]=e("div",{class:"text-sm text-muted-foreground"},"Price",-1)),e("div",J,"$"+o(i.currentPlan.price.toFixed(2))+"/mo",1)]),e("div",null,[t[8]||(t[8]=e("div",{class:"text-sm text-muted-foreground"},"Renews",-1)),e("div",K,o(i.currentPlan.renewalDate),1)])])]),e("div",O,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold"},"Payment Method",-1)),e("div",Q,o(i.paymentMethod.brand)+" ending •••• "+o(i.paymentMethod.last4)+" (exp "+o(i.paymentMethod.exp)+")",1),e("div",W,[e("div",null,[e("div",{class:"flex items-center justify-between mb-2"},[t[10]||(t[10]=e("div",{class:"text-sm font-medium"},"Saved Cards",-1)),e("button",{type:"button",class:"text-xs rounded border px-3 py-1.5",onClick:B},"Add Card")]),e("div",X,[(l(!0),n(c,null,y(w.cards||[],s=>(l(),n("div",{key:s.id,class:A(["flex items-center justify-between rounded border p-3",s.is_default?"border-emerald-400 ring-1 ring-emerald-200 bg-emerald-50/40":"bg-white"])},[e("div",null,[e("div",Z,o(s.brand)+" •••• "+o(s.last4),1),e("div",ee,o(s.name||"—")+" · exp "+o(s.exp),1)]),e("div",te,[s.is_default?(l(),n("span",se,"Default")):(l(),n("button",{key:1,type:"button",class:"text-xs rounded border px-2 py-1",disabled:r(g).processing,onClick:f=>P(s.id)},"Make default",8,re)),e("button",{type:"button",class:"text-xs rounded border px-2 py-1 text-red-700 border-red-300 disabled:opacity-50",disabled:s.is_default||r(_).processing,onClick:f=>V(s.id)},"Delete",8,de)])],2))),128))])])])]),e("div",oe,[t[12]||(t[12]=e("div",{class:"border-b p-3 font-medium"},"Invoices",-1)),e("div",le,[(l(!0),n(c,null,y(i.invoices,s=>(l(),n("div",{key:s.id,class:"flex items-center justify-between p-3 text-sm"},[e("div",null,o(s.id),1),e("div",ne,o(s.date),1),e("div",null,"$"+o(s.amount.toFixed(2)),1),e("a",{href:s.url,class:"rounded border px-2 py-1"},"PDF",8,ie)]))),128))])]),b.value?(l(),n("div",ae,[e("div",{class:"absolute inset-0 bg-black/40",onClick:x}),e("div",ue,[e("div",{class:"px-5 py-4 border-b flex items-center justify-between"},[t[13]||(t[13]=e("h3",{class:"text-base font-semibold"},"Add New Card",-1)),e("button",{class:"text-sm text-gray-500",onClick:x},"✕")]),e("form",{class:"p-5 grid gap-3",onSubmit:t[5]||(t[5]=U(s=>{r(d).post(i.route("app.billing.cards.store"),{preserveScroll:!0,onSuccess:()=>{x()}})},["prevent"]))},[e("div",me,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-xs font-medium text-gray-700"},"First Name",-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r(d).first_name=s),type:"text",class:"mt-1 w-full rounded border px-2 py-1.5 text-sm"},null,512),[[p,r(d).first_name]]),r(d).errors.first_name?(l(),n("p",pe,o(r(d).errors.first_name),1)):a("",!0)]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-xs font-medium text-gray-700"},"Last Name",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>r(d).last_name=s),type:"text",class:"mt-1 w-full rounded border px-2 py-1.5 text-sm"},null,512),[[p,r(d).last_name]]),r(d).errors.last_name?(l(),n("p",xe,o(r(d).errors.last_name),1)):a("",!0)])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-xs font-medium text-gray-700"},"Credit Card Number",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>r(d).card=s),type:"text",inputmode:"numeric",placeholder:"•••• •••• •••• ••••",class:"mt-1 w-full rounded border px-2 py-1.5 text-sm"},null,512),[[p,r(d).card]]),r(d).errors.card?(l(),n("p",ce,o(r(d).errors.card),1)):a("",!0)]),e("div",be,[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-xs font-medium text-gray-700"},"Expiration (MMYY or MM/YYYY)",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>r(d).exp=s),type:"text",placeholder:"MMYY",class:"mt-1 w-full rounded border px-2 py-1.5 text-sm"},null,512),[[p,r(d).exp]]),r(d).errors.exp?(l(),n("p",fe,o(r(d).errors.exp),1)):a("",!0)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-xs font-medium text-gray-700"},"CVV",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>r(d).cvv=s),type:"text",placeholder:"123",class:"mt-1 w-full rounded border px-2 py-1.5 text-sm"},null,512),[[p,r(d).cvv]]),r(d).errors.cvv?(l(),n("p",ve,o(r(d).errors.cvv),1)):a("",!0)])]),e("div",ye,[e("button",{type:"button",class:"rounded border px-3 py-1.5 text-sm",onClick:x},"Cancel"),e("button",{type:"submit",class:"btn-primary rounded px-3 py-1.5 text-sm disabled:opacity-60",disabled:r(d).processing},"Save Card",8,ge)]),r(u).props?.flash?.success?(l(),n("p",_e,o(r(u).props.flash.success),1)):a("",!0),r(u).props?.flash?.error?(l(),n("p",ke,o(r(u).props.flash.error),1)):a("",!0)],32)])])):a("",!0)])]),_:1})]),_:1}))],64))}});export{Se as default};
