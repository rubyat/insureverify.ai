import{d as I,C as B,p as U,s as L,r as v,c as o,o as s,a as u,k as y,u as i,h as T,w as x,b as e,F as g,j as b,n as V,f,t as r,e as h,T as k,D as z}from"./app-B_Zw6QGP.js";import{_ as D,C as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-oEio1Vio.js";import{_ as E}from"./SiteLayout.vue_vue_type_script_setup_true_lang-C4QPYVyk.js";import{_ as q}from"./Layout.vue_vue_type_script_setup_true_lang-BEjMiQs6.js";import{S as A}from"./shield-check-BTN_2YYq.js";import{L as w}from"./loader-circle-Dx7OscY7.js";import"./index-7eilHQPG.js";import"./useForwardExpose-C6-hPyV1.js";import"./VisuallyHidden-Cy1sULpD.js";import"./createLucideIcon-CHfYH6pV.js";import"./Heading.vue_vue_type_script_setup_true_lang-FmtfF59k.js";const G={class:"p-6"},H={class:"bg-gray-100 mt-6 rounded-xl py-10 px-6 md:px-10"},J={class:"container mx-auto"},K={class:"grid lg:grid-cols-3 gap-6 mx-auto"},O={class:"flex items-start justify-between"},Q={class:"font-semibold text-lg"},R={key:0,class:"text-xs rounded-full bg-sky-100 text-sky-700 px-2 py-1"},W={class:"mt-2 text-3xl font-extrabold tracking-tight"},X={key:0,class:"text-sm text-foreground/70 mt-2"},Z={key:1,class:"text-sm mt-4 text-foreground/80"},ee={class:"mt-6 space-y-3 text-sm text-foreground/80"},te={class:"mt-auto pt-8"},se={key:0,class:"w-full px-4 py-3 rounded border bg-gray-100 text-gray-600 cursor-default",disabled:"","aria-disabled":"true"},oe=["disabled","onClick"],ne={key:0},ie={key:1},re={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},ae={class:"relative z-10 w-full max-w-lg rounded-xl border bg-white shadow-xl"},le={class:"p-6 md:p-7 space-y-6"},de={class:"flex items-start gap-3"},ue={class:"rounded-lg bg-primary/10 text-primary p-2 ring-1 ring-primary/20"},ce={class:"rounded-lg border p-4 bg-gray-50"},pe={class:"flex items-center justify-between"},me={class:"font-medium"},fe={class:"text-right"},ge={class:"font-semibold"},xe={class:"space-y-4"},ve={class:"rounded-lg border p-4 bg-white"},_e={class:"flex items-center justify-between"},ye={key:0,class:"font-medium"},be={key:1,class:"text-sm text-foreground/70"},he={class:"flex items-center justify-between text-xs text-foreground/70"},ke={class:"inline-flex items-center gap-2"},we={class:"flex items-center justify-end gap-3 pt-2"},Ce=["disabled"],Pe=["disabled"],Se={key:0,class:"absolute inset-0 rounded-xl bg-white/70 backdrop-blur-sm flex items-center justify-center"},Me={class:"flex flex-col items-center gap-3"},De=I({__name:"Upgrade",props:{plans:{},currentPlanId:{},paymentMethod:{}},setup(C){const l=C,P=B(),S=U(()=>P.props?.auth?.is_admin?D:E),M=[{title:"Upgrade Plan",href:"/app/upgrade"}],a=L({plan_id:null}),c=v(!1),p=v(null),d=v(!1);function $(m){p.value=m,c.value=!0,d.value=!1}const j=m=>{a.plan_id=m,a.post(route("app.upgrade.switch"),{preserveScroll:!0,onSuccess:()=>{c.value=!1},onFinish:()=>{d.value=!1,c.value=!1}})};async function N(){p.value&&(d.value=!0,await new Promise(m=>setTimeout(m,1400)),j(p.value.id))}return(m,t)=>(s(),o(g,null,[u(i(T),{title:"Upgrade Plan"}),(s(),y(z(S.value),{breadcrumbs:M},{default:x(()=>[u(q,null,{default:x(()=>[e("div",G,[t[12]||(t[12]=e("h1",{class:"text-2xl font-semibold"},"Choose a plan",-1)),t[13]||(t[13]=e("p",{class:"text-muted-foreground mt-1"},"Select the plan that best fits your usage. Your current plan is highlighted.",-1)),e("section",H,[e("div",J,[t[4]||(t[4]=e("div",{class:"text-center mb-10"},[e("h2",{class:"text-3xl md:text-4xl font-bold"},"Pricing"),e("p",{class:"text-foreground/70 mt-2"},"Simple, transparent pricing that scales with your business")],-1)),e("div",K,[(s(!0),o(g,null,b(l.plans??[],n=>(s(),o("div",{key:n.id,class:V(["border rounded-lg p-6 flex flex-col bg-white transition-all duration-300 ease-out transform hover:-translate-y-1 hover:scale-[1.03] hover:shadow-xl hover:shadow-sky-900/10",n.id===l.currentPlanId?"border-sky-500 ring-2 ring-sky-200":"hover:border-sky-200/70"])},[e("div",O,[e("h3",Q,r(n.name),1),n.id===l.currentPlanId?(s(),o("span",R,"Current")):f("",!0)]),e("div",W,[n.price!==null&&n.price!==void 0?(s(),o(g,{key:0},[h(" $"+r(Number(n.price).toFixed(0))+" ",1),t[2]||(t[2]=e("span",{class:"text-base font-medium text-foreground/70"},"/month",-1))],64)):(s(),o(g,{key:1},[h(" Custom Pricing ")],64))]),n.verifications_included?(s(),o("p",X,r(n.verifications_included)+" verifications included",1)):f("",!0),n.description?(s(),o("p",Z,r(n.description),1)):f("",!0),e("ul",ee,[(s(!0),o(g,null,b(n.features||[],(_,F)=>(s(),o("li",{key:F,class:"flex items-start gap-2"},[t[3]||(t[3]=e("span",{class:"mt-1 w-2 h-2 bg-black rounded-full"},null,-1)),e("span",null,r(_),1)]))),128))]),e("div",te,[n.id===l.currentPlanId?(s(),o("button",se," Current Plan ")):(s(),o("button",{key:1,type:"button",class:"btn-primary w-full text-center px-4 py-3 rounded disabled:opacity-60",disabled:i(a).processing,onClick:_=>$(n)},[i(a).processing?(s(),o("span",ne,"Switching…")):(s(),o("span",ie,r(n.cta_label||"Choose Plan"),1))],8,oe))])],2))),128))])])]),u(k,{name:"fade"},{default:x(()=>[c.value?(s(),o("div",re,[e("div",{class:"absolute inset-0 bg-black/40",onClick:t[0]||(t[0]=n=>c.value=!1)}),e("div",ae,[e("div",le,[e("div",de,[e("div",ue,[u(i(Y),{class:"w-5 h-5"})]),t[5]||(t[5]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Confirm upgrade"),e("p",{class:"text-sm text-foreground/70"},"Secure payment powered by PCI-compliant provider.")],-1))]),e("div",ce,[e("div",pe,[e("div",null,[t[6]||(t[6]=e("div",{class:"text-sm text-foreground/70"},"Plan",-1)),e("div",me,r(p.value?.name),1)]),e("div",fe,[t[7]||(t[7]=e("div",{class:"text-sm text-foreground/70"},"Price",-1)),e("div",ge,r(p.value?.price!=null?`$${Number(p.value?.price).toFixed(2)}/mo`:"Custom"),1)])])]),e("div",xe,[e("div",ve,[e("div",_e,[e("div",null,[t[8]||(t[8]=e("div",{class:"text-sm text-foreground/70"},"Payment Method",-1)),l.paymentMethod?(s(),o("div",ye,r(l.paymentMethod.brand)+" ending •••• "+r(l.paymentMethod.last4)+" (exp "+r(l.paymentMethod.exp)+") ",1)):(s(),o("div",be," No card on file. Please add one on the Billing page. "))]),t[9]||(t[9]=e("a",{href:"/app/billing",class:"text-sm underline"},"Manage cards",-1))])])]),e("div",he,[e("div",ke,[u(i(A),{class:"w-4 h-4 text-emerald-600"}),t[10]||(t[10]=e("span",null,"Your payment info is encrypted & never stored on our servers.",-1))])]),e("div",we,[e("button",{type:"button",class:"px-4 py-2 rounded border",disabled:d.value||i(a).processing,onClick:t[1]||(t[1]=n=>c.value=!1)},"Cancel",8,Ce),e("button",{type:"button",class:"btn-primary inline-flex items-center gap-2 px-5 py-2 rounded disabled:opacity-60",disabled:d.value||i(a).processing,onClick:N},[d.value||i(a).processing?(s(),y(i(w),{key:0,class:"h-4 w-4 animate-spin"})):f("",!0),e("span",null,r(d.value||i(a).processing?"Processing…":"Confirm & Upgrade"),1)],8,Pe)]),u(k,{name:"fade"},{default:x(()=>[d.value||i(a).processing?(s(),o("div",Se,[e("div",Me,[u(i(w),{class:"h-8 w-8 animate-spin text-primary"}),t[11]||(t[11]=e("div",{class:"text-sm text-foreground/70"},"Securing payment and upgrading plan…",-1))])])):f("",!0)]),_:1})])])])):f("",!0)]),_:1})])]),_:1})]),_:1}))],64))}});export{De as default};
